# **Digital recognition** #
## 利用ov5640摄像头采集图像，并利用4.3寸RGB屏显示捕获到的数字，并将识别到的数字显示在数码管上 ##
**目前实现功能：**

- 利用ov5640摄像头采集图像，并利用4.3寸RGB屏显示捕获到的图像。能够支持4.3寸480X277、800X480、7寸1024X600、10.1寸1280X800这些分辨率的屏幕
- 后续会加上数字识别模块，从而识别捕获到的数字，并在数码管上显示出来

## **介绍：** ##

 PLL模块
- 
- PLL模块输入时钟为50MHZ，输出3个时钟，分别是100MHZ（供SDRAM模块）、100MHZ，-75°（供SDRAM外设使用）、100MHZ（供I2C模块和LCD模块使用）

cmos_capture模块
-
1. 时钟使用ov5640自带的24MHZ晶振
2. 寄存器全部配置完成后，先等待10帧数据，待寄存器配置生效后再开始采集图像
3. 摄像头采集到的数据是8位的，需转成16位的RGB565数据，才能写入SDRAM
4. 产生16位数据之后，就拉高输出数据有效信号，作为SDRAM的写使能信号

 SDRAM模块
-
- 此模块由2个子模块构成：FIFO读写模块、SDRAM控制器模块

**FIFO读写模块**

1. FIFO读写控制模块，主要分别负责与摄像头和LCD模块进行通信，即读入摄像头的数据，并将读出的数据发送到LCD模块
2. FIFO控制模块中，使用乒乓存储，转换读写的bank地址，完成读写操作

**SDRAM控制器模块**

1. SDRAM控制器模块由3个子模块构成：SDRAM状态控制模块、SDRAM命令控制模块、SDRAM数据读写模块
2. SDRAM状态控制模块：完成SDRAM初始化和工作状态机的状态控制
3. SDRAM命令控制模块：在初始化和工作状态机下各个阶段，对连接着外设SDRAM的控制信号线、L-Bank地址线、地址总线赋值，使之执行相应操作
4. SDRAM数据读写模块：根据工作状态机的输出状态指示，决定是执行读操作还是写操作。写操作时，将待写入数据送到SDRAM数据总线上；读数据时,双向数据线作为输入时保持高阻态，寄存SDRAM数据线上的数据

LCD模块
- 
- 此模块由3个子模块构成：LCD显示屏ID识别模块、时钟分频模块、LCD驱动模块

**LCD显示屏ID识别模块**

- 为了识别使用的LCD屏幕，对输入的16位数据的第4、10、15位进行读取，识别连接的显示屏的尺寸和分辨率

**时钟分频模块**

- 对输入LCD模块的100MHZ时钟进行分频，得到10MHZ、33.3MHZ和50MHZ的时钟，以适配不同尺寸和分辨率的LCD屏幕

**LCD驱动模块**

1. 在数据有效的时候，拉高LCD输入使能信号，将数据传送到LCD显示
2. 采用逐行扫描显示模式，在对应的像素点输入对应的数据信号
3. 不同LCD尺寸和分辨率对应的行场时序参数不同
4. 输出一个data\_ req信号，连接到SDRAM的rd\_en信号，请求读取数据
5. 输出一个dri\_clk时钟，给到I2C配置模块

Picture_size模块
- 
- 根据LCD读取到的LCD屏幕ID，输出图像的尺寸大小和SDRAM读写操作最大地址

I2C配置模块
- 
1. 根据输入的图像的尺寸大小信息，输出摄像头的寄存器配置所需的参数，即I2C驱动模块要配置的地址与数据（16位地址，8位数据）
2. 单个寄存器配置完成后，会发出一个配置完成信号
3. 所有寄存器配置完成后，会发出一个初始化完成信号

I2C驱动模块
- 
1. 根据输入的配置参数，通过控制scl和sda线，完成对ov5640摄像头的配置
2. 将I2C的读写控制信号拉低，即只进行写操作，而不读取数据
3. 输出I2C的SCL时钟信号，不能大于400khz，取250khz
